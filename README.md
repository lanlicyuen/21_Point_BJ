# 21点牌计数器

这是一个用于记录21点(Blackjack)游戏的桌面应用程序，基于8副扑克牌计算。

## 功能特点

### 主要功能
- **牌数计算**: 基于8副牌(每种牌32张)进行计数
- **实时更新**: 点击牌面按钮自动扣除对应牌数
- **百分比显示**: 用绿色进度条显示剩余牌数百分比
- **游戏统计**: 记录开局数、胜负次数
- **数据保存**: 自动保存所有数据到文件

### 界面布局
1. **顶部按钮区**:
   - 新局: 重置所有数据
   - 查询: 查看当前数据或保存的记录文件
   - 教学提示区域
   - **保存当前记录**: 保存当前数据到带时间戳的JSON文件
   - **删除当前记录**: 选择并删除保存的记录文件

2. **左侧牌面按钮**: A, 2-10, J, Q, K (已优化尺寸)
   - 点击对应按钮扣除一张牌

3. **中间显示区域**: 
   - 显示每种牌的剩余数量和百分比
   - 绿色进度条显示剩余比例

4. **右侧统计区域**: (已优化布局)
   - 已开局数计数器
   - Win计数器 (需要总局数大于胜利数才能操作)
   - Lose计数器 (需要总局数大于失败数才能操作)
   - 战果统计信息

## 使用方法

### 直接运行Python程序
```bash
python blackjack_counter.py
```

### 打包成exe文件
1. 运行打包脚本：
```bash
build_exe.bat
```

2. 打包完成后，exe文件将在 `dist` 文件夹中

### 操作说明
1. **开始新局**: 点击"新局"按钮重置所有数据
2. **记录出牌**: 点击左侧对应的牌面按钮
3. **记录结果**: 
   - 先点击"已开局数"的+1按钮增加总局数
   - 然后才能点击Win或Lose的+1按钮记录结果
4. **保存记录**: 点击"保存当前记录"按钮保存到带时间戳的JSON文件
5. **查看数据**: 
   - 点击"查询"按钮查看当前数据
   - 选择"查看保存的记录"来查看历史记录文件
6. **删除记录**: 点击"删除当前记录"按钮选择并删除保存的文件
7. **数据保存**: 程序自动保存当前状态到 `blackjack_data.json`

## 计算逻辑
- 基于8副标准扑克牌(每种牌32张)
- 点击牌面按钮时扣除1张对应的牌
- 实时计算剩余牌数和百分比
- 统计胜率、负率等数据

## 🆕 新增功能特点

### 🔒 数据验证和保护
- **局数验证**: Win和Lose计数必须小于总局数
- **防双击保护**: 所有计数按钮都有防双击保护
- **数据完整性**: 确保统计数据的逻辑一致性

### 💾 记录管理
- **时间戳保存**: 保存记录文件名包含年月日时分秒(格式: blackjack_record_YYYYMMDD_HHMMSS.json)
- **历史查询**: 可以查看保存的历史记录文件
- **文件管理**: 支持删除不需要的记录文件

### 🎨 界面优化
- **紧凑布局**: 左侧按钮缩小50%，减少空间占用
- **简化显示**: 统计区域去除冗余信息，更加简洁
- **功能集中**: 新增的功能按钮位于右上角，便于操作

### 📊 智能统计
- **实时验证**: 防止胜负数超过总局数的逻辑错误
- **详细记录**: 保存时包含完整的统计信息和时间戳
- **多种查看方式**: 可查看当前数据或历史保存的记录

## 文件说明
- `blackjack_counter.py`: 主程序文件
- `requirements.txt`: 依赖包列表
- `build_exe.bat`: 打包脚本
- `blackjack_data.json`: 数据保存文件(运行后自动生成)

## 系统要求
- Windows操作系统
- Python 3.6或更高版本
- 推荐屏幕分辨率: 1024x768或更高
